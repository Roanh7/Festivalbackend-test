<!DOCTYPE html>
<html lang="nl">
<head>
  <meta charset="UTF-8" />
  <title>Registreren - Festival Agenda 2025</title>
  <link rel="stylesheet" href="/styling/agenda.css">
</head>
<body>
  <header>
    <h1>Festival Agenda 2025</h1>
  </header>

  <div class="logo-container">
    <img src="/images/logo.png" alt="Festival Logo">
  </div>

  <nav class="nav-bar">
    <ul>
      <li><a href="agenda.html">Home</a></li>
      <li><a href="reviews.html">Reviews</a></li>
      <li><a href="extra-info.html">Extra Info</a></li>
      <li><a href="register.html" class="active">Registreren</a></li>
      <li><a href="login.html">Inloggen</a></li>
      <li><a href="mijn-festivals.html">Mijn Festivals</a></li>
    </ul>

    <div id="userMenu" style="float:right;"></div>
  </nav>

  <main>
    <div class="form-container">
      <h2>Maak een account aan</h2>

      <!-- Formulier zonder action/method, we doen het via JS -->
      <form id="registerForm">
        <div class="form-group">
          <label for="email">E-mail</label>
          <input type="email" id="email" required />
        </div>

        <div class="form-group">
          <label for="password">Wachtwoord</label>
          <input type="password" id="password" required />
        </div>

        <button type="submit" class="btn">Registreren</button>
      </form>

      <div id="registerResult" class="info-message"></div>

      <p>Heb je al een account? <a href="login.html">Log hier in</a></p>
    </div>
  </main>

  <footer>
    <p>&copy; 2025 Festival Agenda</p>
  </footer>

  <!-- Eigen JS -->
  <script src="/javascript/register.js"></script> 
</body>

<script>
  document.addEventListener('DOMContentLoaded', () => {
    const userMenu = document.getElementById('userMenu');
    
    // Check localStorage
    const token = localStorage.getItem('token');
    const email = localStorage.getItem('email');
  
    if (token && email) {
      // Gebruiker is ingelogd, toon de naam en een "klik om uit te loggen" link
      userMenu.innerHTML = `
        <span style="cursor:pointer;" id="userNameSpan">Hallo, ${email}</span>
      `;
      
      // Event listener om popup te tonen
      const userNameSpan = document.getElementById('userNameSpan');
      userNameSpan.addEventListener('click', () => {
        // Simpele confirm popup
        const confirmLogout = confirm('Wil je uitloggen?');
        if (confirmLogout) {
          // Uitloggen
          localStorage.removeItem('token');
          localStorage.removeItem('email');
          // Refresh of redirect
          window.location.reload();
        }
      });
  
    } else {
      // Niet ingelogd; desnoods tonen we niets of een login-knop
      userMenu.textContent = '';
    }
  });
  </script>

</html>